# Linux Shell脚本基础
基本格式
```
#!/bin/bash
# 脚本注释、用途说明   ---建议写，方便日后查看

command
```
**注意**
在windows编写脚本会天然比linux下面多一个\r，原因是linux下的换行只有\n,但是在windows下面的换行却是/r/n。假如脚本在运行过程中出现了奇怪的"\r"错误，这个脚本可能是在windows下面编写的。可以在shell下采用以下命令进行修正：
`sed -i 's/\r$//' name.sh`
该命令会将脚本文件中的\r使用空白替代。
## 执行脚本
`./test` 一般可执行文件的运行命令，打开一个子shell来读取并执行FileName中命令
`source test`or`. test`  在当前bash环境下读取并执行FileName中的命令,该filename文件可以无执行权限
`sh [-x] test` 添加`-x`参数可以查看脚本执行的内容,打开新的子shell,读取并执行FileName中的命令,该filename文件可以无“执行权限”
## 变量
`变量名 = "内容"`引用的时候采用\$符号标记,数学计算公式需要用[]括起来，且外面要加上\$
>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。
>中间不能有空格，可以使用下划线 _。
>不能使用标点符号。
>不能使用bash里的关键字（可用help命令查看保留关键字）
```
预设变量
sh name.sh opt1 opt2  -----命令行输入
   $0      $1   $2    -----在脚本中对应的变量名
```
## 常见命令
```bash
date   #打印日期时间
date "+%y-%m/%d %H:%M:%S"  #设置打印时间的格式
date -d "+ year/month/day"  "时间格式" #设置打印多久后的时间
date +%W   #打印星期几

echo  ""   #打印后面的内容

read x   #用户在命令行中输入x的值
read -p "提示语" x   #用户紧跟在提示语后面输入x的值
```
## 逻辑判断
**if**
基本格式
```
if [] ;then
command
elif [];then
command
else
command
fi
```
参数说明
>`[]` && 表示与  ||表示或
>判断语句使用[]
>不能使用><=,需要使用 -lt(小于) -gt(大于) -le(小于等于) -ge(大于等于) -eq(等于) -ne(不等于)   
ex. `if[ $a -lt 100];then`
>也可以用于判断文件的属性
>-e ：判断文件或目录是否存在
>-d ：判断是不是目录，并是否存在
>-f ：判断是否是普通文件，并存在
>-r ：判断文档是否有读权限
>-w ：判断是否有写权限
>-x ：判断是否可执行
## 选择语句
**case**
基本格式
```
case 变量 in
value1)     # vaule个数不限制
command
;;          # ;;必不可少
vaule2)
command
;;
...
*)          # *表示，上面value以外的值，注意*周围没有引号
command
;;
esac
```
## 循环
**for**
基本格式
```
for i in `seq 1 5`; do
	command
done
```
**while**
```
while []; do
	command
done
```
## 函数
```
function funame(){
    command       #函数的参数直接使用，相当于全局变量，相当于相应位置的代码替换
}
```
## 脚本参数
- \$#：传入脚本的参数个数；
- \$0:  脚本自身的名称；　　
- \$1:  传入脚本的第一个参数；
- \$2:  传入脚本的第二个参数；
- \$@: 传入脚本的所有参数；
- \$*：传入脚本的所有参数；
- \$\$:  脚本执行的进程id；
- \$?:  上一条命令执行后的状态，结果为0表示执行正常，结果为1表示执行异常；

*其中\$\@与\$\*正常情况下一样，当在脚本中将\$\*加上双引号作为“\$\*”引用时，此时将输入的所有参数当做一个整体字符串对待。比如输入参数有a b c三个参数，则“\$\*”表示“a b c”一个字符串。*